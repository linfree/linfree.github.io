<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><title> 前端分页逻辑的思考 · 静思地</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="前端分页逻辑的思考 - Lin Free"><meta name="keywords" content="分页 前端 逻辑"><meta name="author" content="Lin Free"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.fbi.st/atom.xml" title="静思地"></head><body><header><div class="header row"> <a href="http://fbi.st/" class="logo-link"><img src="/images/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="博文" class="nav-list-link">博文</a></li><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/categories/live/" target="_self" data-hover="生活" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="/categories/read/" target="_self" data-hover="读书" class="nav-list-link">读书</a></li><li class="nav-list-item"><a href="/about/" target="_self" data-hover="关于" class="nav-list-link">关于</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">前端分页逻辑的思考</h1><div class="post-info">2017-06-01 22:59<a href="http://www.jianshu.com/p/01cd6b0aca06" target="_blank" title="http://www.jianshu.com/p/01cd6b0aca06" class="post-from">原文地址</a></div><div class="post-content"><p>/* </p>
<ul>
<li>今天偶有空闲，于是便想把之前随意放上的一段代码做个解释。</li>
<li>其实以现在的角度（过去了两三个月）来看这个标题，明显感觉有点装逼了。</li>
<li>主要原因是这个简单的问题还算不上思考</li>
<li>不过既然都写了，就继续装下去吧。</li>
</ul>
<p>*/<br><a id="more"></a><br>先上代码,项目里抽取的一段,基于tp的.主要看思路.</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pages"</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">"$totalPage eq 1"</span>&gt;</span> <span class="comment">&lt;!-- 只用一页的情况 --&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"($totalPage gt 1) AND ($totalPage elt 8)"</span>/&gt;</span><span class="comment">&lt;!-- 总页数是2到8也的情况 --&gt;</span></span><br><span class="line">      			<span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">"$page eq 1"</span>&gt;</span>    <span class="comment">&lt;!-- 当前页是1的情况   --&gt;</span>      					</span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"$totalPage+1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$i&#125;"</span>&gt;</span>&#123;$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	  </span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                         </span><br><span class="line">                          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"$page eq $totalPage "</span>/&gt;</span><span class="comment">&lt;!-- 当前页是最后一页的情况   --&gt;</span> </span><br><span class="line">                  		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"$totalPage+1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$i&#125;"</span>&gt;</span>&#123;$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                           </span><br><span class="line">					<span class="tag">&lt;<span class="name">else</span> /&gt;</span><span class="comment">&lt;!-- 其他(不等于第一和最后一页的)情况   --&gt;</span> </span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"$totalPage+1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$i&#125;"</span>&gt;</span>&#123;$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"$totalPage egt 8"</span>/&gt;</span></span><br><span class="line">              	<span class="tag">&lt;<span class="name">if</span> <span class="attr">condition</span>=<span class="string">"$page eq 1"</span>&gt;</span>    <span class="comment">&lt;!-- 当前页是1的情况   --&gt;</span>      					</span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"9"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$i&#125;"</span>&gt;</span>&#123;$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	  </span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                         </span><br><span class="line">                          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              	<span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"($page gt 1) AND ($page lt 5)"</span>/&gt;</span> <span class="comment">&lt;!-- 当前页是2-4的情况   --&gt;</span>   </span><br><span class="line">      					<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"9"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$i&#125;"</span>&gt;</span>&#123;$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                           </span><br><span class="line">                          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"($page egt 5) AND ($page elt ($totalPage-3))"</span>/&gt;</span><span class="comment">&lt;!-- 当前页是5-倒数第4的情况   --&gt;</span>  </span><br><span class="line">                  		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"(-4)"</span> <span class="attr">end</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+$i&#125;"</span>&gt;</span>&#123;$page+$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                           </span><br><span class="line">                          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"$page eq $totalPage"</span>/&gt;</span> <span class="comment">&lt;!-- 当前页是最后一页情况   --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"-7"</span> <span class="attr">end</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+$i&#125;"</span>&gt;</span>&#123;$page+$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>   </span><br><span class="line">                  <span class="tag">&lt;<span class="name">elseif</span> <span class="attr">condition</span>=<span class="string">"$page gt ($totalPage-3)"</span>/&gt;</span><span class="comment">&lt;!--当前页大于最大页数-3且不等于最大页数的情况。--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span>  <span class="attr">href</span>=<span class="string">"/page/&#123;$page-1&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">for</span> <span class="attr">start</span>=<span class="string">"($totalPage-$page)-7"</span> <span class="attr">end</span>=<span class="string">"($totalPage-$page)+1"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+$i&#125;"</span>&gt;</span>&#123;$page+$i&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;/<span class="name">for</span>&gt;</span>                           </span><br><span class="line">                          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/&#123;$page+1&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">if</span>&gt;</span>        </span><br><span class="line">      		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其实在备注中已经很明显了。<br>分为以下几种情况，总页面数：  </p>
<h2 id="1-总页数只有一页的情况"><a href="#1-总页数只有一页的情况" class="headerlink" title="1.总页数只有一页的情况"></a>1.总页数只有一页的情况</h2><blockquote>
<p>假设总页数只有1页的话，当前页肯定是1，且没有上一页或下一页 </p>
</blockquote>
<h2 id="2-总页数2页到8页的情况（假设共显示八页）"><a href="#2-总页数2页到8页的情况（假设共显示八页）" class="headerlink" title="2.总页数2页到8页的情况（假设共显示八页）"></a>2.总页数2页到8页的情况（假设共显示八页）</h2><blockquote>
<p>首先，总页数小于8的话，所有的页面都应该显示。直接用for循环到最大页数。</p>
</blockquote>
<p>这种情况下，假设当前页是1的话，就没有上一页，有下一页。<br>假设当前页是最后一页的话，有上一页，但是没有下一页。<br>其他情况下就是上一页和下一页都有。   </p>
<h2 id="3-总页数大于8页的情况"><a href="#3-总页数大于8页的情况" class="headerlink" title="3.总页数大于8页的情况"></a>3.总页数大于8页的情况</h2><blockquote>
<p>这种情况稍微复杂，因为需要控制页面的输出</p>
</blockquote>
<p>假设当前页是1到5页的情况，显示的是1-8页。并且，当前页是1的情况没有上一页。 </p>
<p>分离出来就是：<br>当前页为1的情况：没有上一页，有下一页，显示1-8页，    </p>
<p>当前页为2-5的情况，有上一页和下一页，显示1-8页，  </p>
<p>那么当页码大于5页的时候呢？？这个时候就需要考虑到三种种情况，  </p>
<ol>
<li>当前页小于最大页数-3的情况，这个情况下，就显示当前页-4页到当前页+3页。 </li>
<li>当前页大于最大页数-3且不等于最大页数的情况。  </li>
<li>当前页是最大页数的情况。  </li>
</ol>
<p>这三种情况总结一下就是：  </p>
<ol>
<li>显示上一页和下一页，页码是当前页-4页到当前页+3页  </li>
<li>显示上一页和下一页，显示当前（页总页数-当前页）-7 到（总页数-当前页）+1 ps：这种情况稍微要奇怪  </li>
<li>显示上一页，不显示下一页，（显示当前页-8）到 当前页。  </li>
</ol>
</div></article></div><div class="right-container"><div class="widget"><div class="category"><h4>分类归档</h4><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Elasticsearch非权威指南/">Elasticsearch非权威指南</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/live/">live</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/read/">read</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">7</span></li></ul></div></div><div class="widget"><div class="tagcloud"><h4>标签云</h4><a href="/tags/Elasticsearch/" style="font-size: 18px;">Elasticsearch</a> <a href="/tags/Hadoop/" style="font-size: 12px;">Hadoop</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 14px;">MySQL</a> <a href="/tags/Mysql/" style="font-size: 14px;">Mysql</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/leetcode/" style="font-size: 10px;">leetcode</a> <a href="/tags/php/" style="font-size: 20px;">php</a> <a href="/tags/python/" style="font-size: 16px;">python</a> <a href="/tags/tools/" style="font-size: 12px;">tools</a> <a href="/tags/数据库/" style="font-size: 16px;">数据库</a> <a href="/tags/生活/" style="font-size: 16px;">生活</a> <a href="/tags/电影/" style="font-size: 12px;">电影</a> <a href="/tags/读书笔记/" style="font-size: 10px;">读书笔记</a></div></div><div class="widget"><div class="recent"><h4>最近文章</h4><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/10/一段优雅的高级正则打开[断言]之门/">一段优雅的高级正则打开[断言]之门</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/09/匹配IPv4的最强正则/">匹配IPv4的最强正则</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/19/elasticsearch常用查询整理/">elasticsearch常用查询整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/20/《如何阅读一本书》读书笔记/">《如何阅读一本书》读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/27/mysql通过触发器远程同步/">mysql通过触发器远程同步</a></li></ul></div></div><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/2017/12/15/处理php脚本超时的各种尝试/" class="prev">PREV</a><a href="/2017/05/20/写在开始的话/" class="next">NEXT</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80MDQ4MC8xNzAwNw=="></div><script type="text/javascript">(function(d, s) {
var j, e = d.getElementsByTagName(s)[0];
if (typeof LivereTower === 'function') { return; }
j = d.createElement(s);
j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
j.async = true;
e.parentNode.insertBefore(j, e);
})(document, 'script');</script><noscript> 为正常使用来必力评论功能请激活JavaScript</noscript><div class="copyright"><p>© 2017 - 2019 <a target="_blank">Lin Free</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/linfree/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a>.</p></div><div class="totop"><i></i></div></div></footer><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="/scripts/jquery-1.8.2.min.js"></script><script src="/scripts/arAnchor.js"></script><script src="/scripts/main.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>